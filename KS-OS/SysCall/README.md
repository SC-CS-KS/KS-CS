# System Call
```md
进程既可以在用户空间运行，又可以在内核空间中运行。进程在用户空间运行时，
被称为进程的用户态，而陷入内核空间的时候，被称为进程的内核态。

从用户态到内核态的转变，需要通过系统调用来完成。
比如，当我们查看文件内容时，就需要多次系统调用来完成：
首先调用 open() 打开文件，然后调用 read() 读取文件内容，
并调用 write() 将内容写到标准输出，最后再调用 close() 关闭文件。
```
```md
一次系统调用的过程，其实是发生了两次 CPU 上下文切换。
CPU 寄存器里原来用户态的指令位置，需要先保存起来。
接着，为了执行内核态代码，CPU 寄存器需要更新为内核态指令的新位置。
最后才是跳转到内核态运行内核任务。

而系统调用结束后，CPU 寄存器需要恢复原来用户保存的状态，然后再切换到用户空间，继续运行进程。
```
```md
系统调用过程通常称为特权模式切换，而不是上下文切换。
跟我们通常所说的进程上下文切换是不一样的。
```