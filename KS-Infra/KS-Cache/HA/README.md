# Cache High Availability

```md
原则
	以提高性能为目的
	维护缓存的代价要小于创建原始对象的代价
```

## Scheme
* 应用层访问缓存的模式
```md
双读双写
异步更新
串联模式
```
* 分布式缓存分片
```md
单机的缓存满足不了对海量数据缓存的需求
	通常通过多个缓存节点来缓存大量的临时数据，来加速缓存的存取速度。
```
```md
客户端分片
客户端分片通过应用层直接操作分片逻辑
分片规则需要在同一个应用的多个节点间保存，每个应用层都嵌入一个操作切片的逻辑实现
优缺点
	性能很好
		实现起来比较简单，适合快速上线，而且切分逻辑是自己开发的，
			如果在生产上出了问题，则都比较容易解决
	但是它侵入了业务逻辑的实现，会让缓存服务器保持的应用程序连接比较多，
		这要看应用服务器池的节点数量，需要提前进行容量评估。
```
```md
代理分片
好处是让应用层开发人员专注于业务逻辑的实现
把缓存分片的配置留给代理层做，具体可以由运维人员来实施；缺点是增加了代理层。
```
```md
集群分片
  有的缓存自身提供了集群功能，集群可以实现分片和高可用特性
	典型的就是Redis 3.0提供的Cluster
```
## [Puzzles](puzzles.md)
* 数据一致性
* 缓存并发
* 缓存雪崩
* 缓存穿透
* 缓存击穿

* 热点缓存 
```md
基于流式计算技术的缓存热点自动发现
热点缓存自动加载为JVM本地缓存
限流熔断保护  
```
* [如果20万用户同时访问一个热点缓存](https://juejin.im/post/5c448670e51d455bd36b67f9)

## Reference
* [Scaling Memcache at Facebook](https://blog.csdn.net/zjsyhjh/article/details/45151897)
